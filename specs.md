# Спецификация Веб-приложения: Crypta.Info

## 1. Обзор

Данный документ описывает функциональные и нефункциональные требования к веб-приложению, предназначенному для сравнения и обзора криптовалютных бирж. Цель проекта - предоставить пользователям актуальную, объективную и удобную информацию для выбора подходящей биржи.

## 2. Функциональные Требования

### 2.1. Главная страница (`/`)

*   **Назначение:** Основная точка входа, предоставление общего обзора и быстрого доступа к информации.
*   **Компоненты:**
    *   **Блок поиска и фильтрации:**
        *   Поиск по названию биржи.
        *   Фильтры: страна регистрации/доступности, наличие лицензий (по юрисдикциям), тип KYC (обязательный, опциональный, нет), диапазон торговых комиссий (maker/taker), поддержка фиатных валют, наличие P2P-платформы, доступные языки интерфейса.
        *   Опции сортировки списка бирж: по рейтингу (общему), суточному объему, названию (А-Я).
    *   **Список бирж:**
        *   Отображение в виде карточек с пагинацией или бесконечной прокруткой.
        *   **Содержимое карточки:**
            *   Логотип биржи.
            *   Название биржи.
            *   Средний общий рейтинг (звезды/число).
            *   Количество отзывов.
            *   Суточный торговый объем (обновляемый).
            *   Краткая информация (год основания, страна).
            *   Кнопка/ссылка "Подробнее" (ведет на страницу биржи).
    *   **Блок "Топ Рейтингов":**
        *   Вывод лучших бирж по ключевым категориям (динамически обновляемый):
            *   Общая надежность (комплексный рейтинг).
            *   Самые низкие комиссии.
            *   Лучшая поддержка пользователей.
            *   Наивысшая ликвидность (на основе объема).
            *   Лучшие для новичков (на основе удобства интерфейса и отзывов).
    *   **Блок "Новости и События":**
        *   Краткие новостные заголовки, связанные с биржами (например, "Биржа X приостановила вывод средств", "Биржа Y добавила новую монету").
        *   Источник: Ручной ввод администратором или агрегация из доверенных источников (с указанием источника).
        *   Отображение даты новости.
    *   **Блок "Отзывы недели/месяца":**
        *   Выборка наиболее полезных или обсуждаемых отзывов за период.
        *   Отображение автора (никнейм), биржи, оценки, краткого текста отзыва.

### 2.2. Страница биржи (`/exchanges/{slug}`)

*   **Назначение:** Предоставление детальной информации о конкретной бирже.
*   **Компоненты:**
    *   **Основная информация:**
        *   Название, логотип.
        *   Год запуска.
        *   Страна регистрации / Штаб-квартира.
        *   Официальный веб-сайт (ссылка).
        *   Ссылки на социальные сети биржи (если применимо).
    *   **Юридическая информация:**
        *   Данные о лицензиях (номер, юрисдикция, статус).
        *   Политика KYC/AML (уровень верификации, требуемые документы).
    *   **Рейтинги по категориям:**
        *   Средний балл (звезды/число) и/или гистограмма распределения оценок по категориям:
            *   Удобство интерфейса (UI/UX).
            *   Качество и скорость поддержки.
            *   Безопасность (наличие 2FA, страховой фонд, история взломов).
            *   Торговые комиссии (Maker/Taker, комиссии на вывод).
            *   Ликвидность и выбор пар.
            *   Скорость ввода/вывода средств.
    *   **Торговая информация:**
        *   Актуальный суточный/недельный объем торгов.
        *   Основные торговые пары.
        *   Краткий обзор структуры комиссий.
        *   Поддерживаемые фиатные валюты.
    *   **Блок "Отзывы пользователей":**
        *   Список отзывов о данной бирже с пагинацией.
        *   Сортировка: по дате (сначала новые/старые), по рейтингу (сначала высокие/низкие), по полезности.
        *   Фильтры: по оценке (1-5 звезд), по наличию скриншота.
    *   **Форма "Оставить отзыв" (требуется авторизация):**
        *   Поля для оценки по категориям (шкала 1-5).
        *   Текстовое поле для комментария (с минимальной/максимальной длиной).
        *   Возможность прикрепить скриншот(ы) (с ограничением по размеру и формату файла).
        *   CAPTCHA или аналогичная защита от спама.

### 2.3. Страница всех отзывов (`/reviews`)

*   **Назначение:** Агрегация всех отзывов пользователей по всем биржам.
*   **Компоненты:**
    *   **Список отзывов:**
        *   Отображение карточек отзывов с пагинацией.
        *   **Содержимое карточки:** Биржа (название + лого), автор (никнейм), дата, оценка(и), текст отзыва, прикрепленные скриншоты (превью), оценка полезности отзыва.
    *   **Фильтры:**
        *   По бирже.
        *   По общей оценке (диапазон звезд).
        *   По языку отзыва (если планируется поддержка).
        *   По дате добавления (период).
        *   По наличию скриншота.
        *   По статусу модерации (одобренные).
    *   **Сортировка:** По дате, по полезности.
    *   **Модерация:** Отзывы проходят премодерацию или постмодерацию (отображаются сразу, но могут быть скрыты после жалоб/проверки). Визуальное обозначение проверенных/одобренных отзывов.
    *   **Хештеги:** Возможность добавления администратором или автоматического присвоения тегов к отзывам (например, #проблема_с_выводом, #верификация, #скам).
    *   **Оценки полезности:** Кнопки "Полезный отзыв" / "Бесполезный отзыв" (требуется авторизация).

### 2.4. Авторизация / Личный кабинет

#### 2.4.1. Аутентификация

*   **Регистрация:**
    *   Через Email + Пароль.
    *   Подтверждение Email по ссылке.
*   **Вход:**
    *   Email + Пароль.
*   **Восстановление пароля:**
    *   Функция "Забыли пароль?" с отправкой ссылки на сброс на Email.
*   **Безопасность:**
    *   Использование JWT (JSON Web Tokens) с коротким сроком жизни access token и долгоживущим refresh token.
    *   Хеширование паролей (например, bcrypt).
    *   Rate limiting на попытки входа и регистрации.

#### 2.4.2. Личный кабинет (`/profile`)

*   **Назначение:** Управление данными пользователя и его активностью на сайте.
*   **Компоненты:**
    *   **Профиль пользователя:**
        *   Возможность изменить никнейм, аватар (опционально).
        *   Просмотр Email (без возможности изменения напрямую).
        *   Смена пароля.
    *   **История активности:**
        *   Список оставленных пользователем отзывов (с возможностью редактирования/удаления в течение ограниченного времени или до начала модерации).
        *   Список оценок полезности, поставленных чужим отзывам.
    *   **Настройки уведомлений (опционально):**
        *   Уведомления об ответах на отзывы, о статусе модерации.

### 2.5. Информационные страницы

*   **О проекте (`/about`):**
    *   Миссия и цели проекта.
    *   Описание методологии расчета рейтингов (прозрачность).
    *   Как работает модерация отзывов, правила публикации.
*   **Контакты (`/contacts`):**
    *   Контактная информация (Email).
    *   Форма обратной связи.
*   **Правила сайта / Пользовательское соглашение (`/terms`):**
    *   Правила поведения, условия использования сервиса.
*   **Политика конфиденциальности (`/privacy`):**
    *   Как обрабатываются и хранятся данные пользователей.
*   **FAQ (`/faq`):**
    *   Ответы на часто задаваемые вопросы.

## 3. Ключевые Модули и Технические Аспекты

*   **Аутентификация:**
    *   Реализация на базе Email/Password.
    *   JWT (access + refresh tokens).
    *   Rate limiting на формы (логин, регистрация, отзывы, оценка полезности).
    *   Защита от CSRF.
*   **Система Отзывов:**
    *   Хранение отзывов, оценок по категориям, скриншотов.
    *   Механизм оценки полезности отзыва (+/-).
    *   Система жалоб на недостоверные/спамные отзывы (для модераторов).
    *   Механизм модерации (очередь на проверку, статусы: на модерации, одобрен, отклонен).
*   **Система Рейтингов:**
    *   Автоматический пересчет средних рейтингов бирж (общий и по категориям) на основе одобренных отзывов.
    * Определить критерии веса.
    *   Фоновый процесс (cron job) для обновления рейтингов и агрегированных данных.
*   **Административная панель:**
    *   Управление пользователями (просмотр, блокировка).
    *   Управление биржами (добавление, редактирование информации, лицензий, комиссий).
    *   Модерация отзывов (одобрение, отклонение, редактирование, ответы от имени администрации).
    *   Управление жалобами на отзывы.
    *   Управление новостями.
    *   Редактирование контента статических страниц (О проекте, FAQ и т.д.).
